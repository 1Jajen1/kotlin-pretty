<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.62.0"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=alternate type=application/rss+xml href=https://1jajen1.github.io/kotlin-pretty/docs/getting-started/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/kotlin-pretty/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/kotlin-pretty/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/kotlin-pretty/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/kotlin-pretty/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/kotlin-pretty/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/kotlin-pretty/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/kotlin-pretty/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/kotlin-pretty/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/kotlin-pretty/favicons/android-192x192.png sizes=192x192><title>Getting started | Kotlin pretty - Easy to use, powerful and extensible prettyprinter</title><meta property="og:title" content="Getting started"><meta property="og:description" content="A step-by-step tutorial on how to install and use kotlin-pretty."><meta property="og:type" content="website"><meta property="og:url" content="https://1jajen1.github.io/kotlin-pretty/docs/getting-started/"><meta property="og:updated_time" content="2020-01-14T00:00:00+00:00"><meta property="og:site_name" content="Kotlin pretty - Easy to use, powerful and extensible prettyprinter"><meta itemprop=name content="Getting started"><meta itemprop=description content="A step-by-step tutorial on how to install and use kotlin-pretty."><meta name=twitter:card content="summary"><meta name=twitter:title content="Getting started"><meta name=twitter:description content="A step-by-step tutorial on how to install and use kotlin-pretty."><link rel=preload href=/kotlin-pretty/scss/main.min.fa767430755364e8f49e24a61b82e97248c9e4b5171e1fb01c1af2ff0d3559da.css as=style><link href=/kotlin-pretty/scss/main.min.fa767430755364e8f49e24a61b82e97248c9e4b5171e1fb01c1af2ff0d3559da.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.3.1.min.js integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin=anonymous></script><title>Getting started | Kotlin pretty - Easy to use, powerful and extensible prettyprinter</title></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/kotlin-pretty/><span class=navbar-logo></span><span class="text-uppercase font-weight-bold">Kotlin pretty - Easy to use, powerful and extensible prettyprinter</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/1Jajen1/kotlin-pretty target=_blank><span>GitHub</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav pt-2 pl-4" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/kotlin-pretty/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=kotlin-pretty-docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/kotlin-pretty/docs/getting-started/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Getting started</a></li><ul><li class="collapse show" id=kotlin-pretty-docs-getting-started></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/kotlin-pretty/docs/api-reference/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Api reference</a></li><ul><li class=collapse id=kotlin-pretty-docs-api-reference></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/kotlin-pretty/docs/annotations/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">How to use annotations</a></li><ul><li class=collapse id=kotlin-pretty-docs-annotations></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/kotlin-pretty/docs/limits/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Possible uses and limits</a></li><ul><li class=collapse id=kotlin-pretty-docs-limits></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/kotlin-pretty/docs/kotlin-pretty-ansi/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Ansi-color prettyprinter</a></li><ul><li class=collapse id=kotlin-pretty-docs-kotlin-pretty-ansi><a class="td-sidebar-link td-sidebar-link__page" id=m-kotlin-pretty-docs-kotlin-pretty-ansi-ansitutorial href=/kotlin-pretty/docs/kotlin-pretty-ansi/ansitutorial/>Tutorial</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-kotlin-pretty-docs-kotlin-pretty-ansi-ansireference href=/kotlin-pretty/docs/kotlin-pretty-ansi/ansireference/>Api reference</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/1Jajen1/kotlin-pretty/edit/master/docs/content/en/docs/getting-started/_index.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/1Jajen1/kotlin-pretty/issues/new?title=Getting%20started" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/1Jajen1/kotlin-pretty/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#setup>Setup</a><ul><li><a href=#gradle>Gradle</a></li></ul></li><li><a href=#rendering-data>Rendering data</a><ul><li><a href=#creating-a-document-from-a-datatype>Creating a document from a datatype</a></li><li><a href=#rendering-the-document>Rendering the document</a></li></ul></li><li><a href=#whats-next>Whats next</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://1jajen1.github.io/kotlin-pretty/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://1jajen1.github.io/kotlin-pretty/docs/getting-started/>Getting started</a></li></ol></nav><div class=td-content><h1>Getting started</h1><div class=lead>A step-by-step tutorial on how to install and use kotlin-pretty.</div><h2 id=setup>Setup</h2><hr><h3 id=gradle>Gradle</h3><p>Add the following to your <code>build.gradle</code>.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy>repositories <span style=color:#000;font-weight:700>{</span>
    maven <span style=color:#000;font-weight:700>{</span> url <span style=color:#d14>&#34;https://dl.bintray.com/jannis/kotlin-pretty&#34;</span> <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>}</span>

dependencies <span style=color:#000;font-weight:700>{</span>
    implementation <span style=color:#d14>&#34;kotlin-pretty:kotlin-pretty:0.4.0&#34;</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h2 id=rendering-data>Rendering data</h2><blockquote><p>TODO API DOC REFERENCES</p></blockquote><p>In this section we will go over creating a very basic rich document for a datatype and how to render it. This will not be the prettiest or best layout possible, just a simple example to get started.</p><h3 id=creating-a-document-from-a-datatype>Creating a document from a datatype</h3><p>Suppose we have an error-report datatype:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>
<span style=color:#000;font-weight:700>data</span> <span style=color:#000;font-weight:700>class</span> <span style=color:#458;font-weight:700>ErrReport</span>(
    <span style=color:#998;font-style:italic>// what happened
</span><span style=color:#998;font-style:italic></span>    <span style=color:#000;font-weight:700>val</span> errorMsg: String,
    <span style=color:#998;font-style:italic>// in which file it happened
</span><span style=color:#998;font-style:italic></span>    <span style=color:#000;font-weight:700>val</span> file: String,
    <span style=color:#998;font-style:italic>// at what line, or which lines did it happen
</span><span style=color:#998;font-style:italic></span>    <span style=color:#000;font-weight:700>val</span> lineSpan: Pair&lt;Int, Int&gt;
)
</code></pre></div><p>Now we want to render this to a responsive document which adapts to the maximum width that we give it. In order to do so we will define a method <code>doc</code>.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>
<span style=color:#000;font-weight:700>import</span> <span style=color:#555>pretty.*</span>
<span style=color:#000;font-weight:700>import</span> <span style=color:#555>pretty.symbols.colon</span>

<span style=color:#000;font-weight:700>fun</span> <span style=color:#900;font-weight:700>ErrReport</span>.doc(): Doc&lt;Nothing&gt; = <span style=color:#d14>&#34;Error in file&#34;</span>.text() spaced
    file.text() spaced
    <span style=color:#d14>&#34;at&#34;</span>.text() spaced
    lineSpan.prettyLineSpan() + colon() + hardLine() +
    errorMsg.reflow()

<span style=color:#000;font-weight:700>fun</span> <span style=color:#900;font-weight:700>Pair</span>&lt;Int, Int&gt;.prettyLineSpan(): Doc&lt;Nothing&gt; =
    <span style=color:#000;font-weight:700>if</span> (first == second) <span style=color:#d14>&#34;line $first&#34;</span>.text()
    <span style=color:#000;font-weight:700>else</span> <span style=color:#000;font-weight:700>if</span> (first &gt; second) <span style=color:#d14>&#34;line $second to line $first&#34;</span>.text()
    <span style=color:#000;font-weight:700>else</span> <span style=color:#d14>&#34;line $first to line $second&#34;</span>.text()
</code></pre></div><p>There is a lot going on here, especially with all those infix functions, so let us go over it one by one:</p><p>The type signature <code>ErrReport.doc()</code> hints that we return <code>Doc&lt;Nothing></code>, this means the resulting document is not annotated. The type parameter refers to annotations, you can learn more about that [here](TODO LINK). For now that is not important as we will not be using annotations yet.</p><p>Next up is <code>file.text()</code>: This calls the extension function <code>String.text(): Doc&lt;Nothing></code> which converts a string to an un-annotated document.</p><blockquote><p>This method has an invariant that it will never be used on a string with a newline. If it is, it will break the layout algorithm and will not produce the best result. Use <code>String.doc()</code> instead which properly handles newlines, but comes at a performance cost.</p></blockquote><p>The resulting document is then combined with one of the most basic combinators of kotlin-pretty called <code>spaced</code>. As the name suggests it takes two documents and inserts one space between them.</p><p>Because rendering a pair of integers needs some additional logic we define another extension function here to help deal with the special cases where the numbers two are in wrong order or are equal.</p><p>The next interesting functions are <code>colon</code> and <code>hardline</code>. <code>colon</code> refers to the string <code>:</code> and <code>hardline</code> to a newline which will never be flattened. TODO add link to learn more about flattening here.</p><p>Lastly we have the function <code>String.reflow()</code> which replaces each space with a <code>softLine</code> which the layout algorithm can either keep as a space or replace with a newline.</p><p>This completes our function which turns an error report into a rich, structured document.</p><h3 id=rendering-the-document>Rendering the document</h3><p>Now that we have a way to get a rich document, we need a way to actually render it and for the sake of simplicity we are simply going to render it to a string.</p><h4 id=generating-a-layout-from-a-document>Generating a layout from a document</h4><p>The first step is to turn our document <code>Doc</code> into a simplified <code>SimpleDoc</code> which represents a stream of tokens that encode the final structure. This is done using the built-in method <code>Doc&lt;A>.layoutPretty(pw: PageWidth): SimpleDoc&lt;A></code>. The argument <code>PageWidth</code> is a simple datatype that encodes the width constraints for rendering:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=color:#000;font-weight:700>sealed</span> <span style=color:#000;font-weight:700>class</span> <span style=color:#458;font-weight:700>PageWidth</span> {
    <span style=color:#998;font-style:italic>// no width constraints
</span><span style=color:#998;font-style:italic></span>    <span style=color:#000;font-weight:700>object</span> <span style=color:#458;font-weight:700>Unbounded</span> : PageWidth()
    <span style=color:#000;font-weight:700>data</span> <span style=color:#000;font-weight:700>class</span> <span style=color:#458;font-weight:700>Available</span>(
        <span style=color:#998;font-style:italic>// The max width which the algorithm will try and not exceed
</span><span style=color:#998;font-style:italic></span>        <span style=color:#000;font-weight:700>val</span> maxWidth: Int,
        <span style=color:#998;font-style:italic>// A fraction which will be applied to the current column width to tweak the max-width setting.
</span><span style=color:#998;font-style:italic></span>        <span style=color:#998;font-style:italic>//  The layout algorithm will then try to not exceed columns of size maxWidth * ribbonFrac
</span><span style=color:#998;font-style:italic></span>        <span style=color:#000;font-weight:700>val</span> ribbonFrac: Float
    ): PageWidth()
}
</code></pre></div><h4 id=rendering-a-layout-into-a-string>Rendering a layout into a string</h4><p>Now that we have a <code>SimpleDoc</code> layout all that is left to do is rendering it. To render any <code>SimpleDoc&lt;A></code> as a string, kotlin-pretty defines an extension method <code>SimpleDoc&lt;A>.renderString(): String</code>.</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>
<span style=color:#000;font-weight:700>val</span> report = ErrReport(<span style=color:#d14>&#34;Failed to do some very important task&#34;</span>, <span style=color:#d14>&#34;someFile.txt&#34;</span>, <span style=color:#099>4</span> to <span style=color:#099>10</span>)

report
    .doc()
    .layoutPretty(PageWidth.Available(<span style=color:#099>80</span>, <span style=color:#099>0.5F</span>))
    .renderString()
<span style=color:#998;font-style:italic>// Error in file someFile.txt at line 4 to line 10:
</span><span style=color:#998;font-style:italic></span>Failed to <span style=color:#000;font-weight:700>do</span> some very important task
</code></pre></div><p>And with a much smaller width:</p><div class=highlight><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin>
report.doc()
    .layoutPretty(PageWidth.Available(<span style=color:#099>20</span>, <span style=color:#099>0.5F</span>))
    .renderString()
<span style=color:#998;font-style:italic>// Error in file someFile.txt at line 4 to line 10:
</span><span style=color:#998;font-style:italic></span>Failed to
<span style=color:#000;font-weight:700>do</span> some
very
important
task
</code></pre></div><p>With the larger max width the input stays on two lines and nicely fits the required max-width. However it fails to fit the ribbon-width (<code>80 * 0.5</code> in that case), but because there are no alternatives with more newlines the algorithm cannot choose a better layout. With the second much more constrained render this becomes even more obvious. The first line does not fit in 20 characters, but because there is no better layout it has to render it like that.</p><p>To make a better layout we should have presented the layout algorithm with more options by using something like <code>softline</code> which can be either a space or a newline. You can learn more about those other options in the other sections of the docs.</p><h2 id=whats-next>Whats next</h2><p>TODO add sections here:</p><ul><li>How to guide</li><li>Api reference</li><li>Inner workings + limits</li></ul><div class=section-index><hr class=panel-line></div><div class="text-muted mt-5 pt-3 border-top">Last modified January 14, 2020</div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Kotlin pretty github repo" aria-label="Kotlin pretty github repo"><a class=text-white target=_blank href=https://github.com/1Jajen1/kotlin-pretty><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020 The Kotlin-pretty authors All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/kotlin-pretty/js/main.min.fb171e2aab14bb7977e34cb898504671ef756ff08ec86b36b384686efa8d99ad.js integrity="sha256-+xceKqsUu3l340y4mFBGce91b/COyGs2s4RobvqNma0=" crossorigin=anonymous></script></body></html>